<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Booking Reviews</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <style>
        .review-card {
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 15px;
            margin-bottom: 15px;
        }
        .star-rating i {
            color: #ffc107;
            cursor: pointer;
            font-size: 1.5rem;
        }
        .star-rating i.inactive {
            color: #dcdcdc;
        }
        .review-form textarea {
            resize: none;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <h2 class="mb-4">Customer Reviews</h2>

        <!-- Review List Section -->
        <div id="reviewList">
            <!-- Reviews will be populated here dynamically -->
        </div>

        <!-- Add Review Form -->
        <div class="card mt-4 review-form">
            <div class="card-body">
                <h5 class="card-title">Add Your Review</h5>
                <form id="reviewForm">
                    <div class="mb-3">
                        <label for="reviewerName" class="form-label">Name</label>
                        <input type="text" id="reviewerName" class="form-control" required placeholder="Enter your name">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Rating</label>
                        <div id="starRating" class="star-rating mb-2">
                            <i class="fas fa-star inactive" data-value="1"></i>
                            <i class="fas fa-star inactive" data-value="2"></i>
                            <i class="fas fa-star inactive" data-value="3"></i>
                            <i class="fas fa-star inactive" data-value="4"></i>
                            <i class="fas fa-star inactive" data-value="5"></i>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="reviewComment" class="form-label">Comment</label>
                        <textarea id="reviewComment" rows="3" class="form-control" required placeholder="Write your review here"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Review</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        const reviews = [
            {
                name: 'Alice Johnson',
                rating: 5,
                comment: 'Excellent service! The bus was comfortable and arrived on time.'
            },
            {
                name: 'John Smith',
                rating: 4,
                comment: 'Good experience overall, but the seat selection could be improved.'
            },
            {
                name: 'Maria Garcia',
                rating: 5,
                comment: 'I had a wonderful journey, very reliable and friendly staff!'
            }
        ];

        let selectedRating = 0;

        // Function to display all reviews
        function displayReviews() {
            const reviewList = document.getElementById('reviewList');
            reviewList.innerHTML = reviews.map(review => `
                <div class="card review-card">
                    <div class="card-body">
                        <h5 class="card-title">${review.name}</h5>
                        <div class="star-rating mb-2">
                            ${'<i class="fas fa-star"></i>'.repeat(review.rating)}
                            ${'<i class="far fa-star"></i>'.repeat(5 - review.rating)}
                        </div>
                        <p class="card-text">${review.comment}</p>
                    </div>
                </div>
            `).join('');
        }

        // Function to handle star rating hover and click
        function handleStarRating() {
            const stars = document.querySelectorAll('#starRating .fa-star');
            stars.forEach(star => {
                // Highlight stars on hover
                star.addEventListener('mouseover', () => {
                    const rating = parseInt(star.getAttribute('data-value'));
                    highlightStars(rating);
                });

                // Remove highlight when not hovering
                star.addEventListener('mouseout', () => {
                    highlightStars(selectedRating);
                });

                // Set rating on click
                star.addEventListener('click', () => {
                    selectedRating = parseInt(star.getAttribute('data-value'));
                    highlightStars(selectedRating);
                });
            });
        }

        // Highlight stars based on the rating
        function highlightStars(rating) {
            const stars = document.querySelectorAll('#starRating .fa-star');
            stars.forEach(star => {
                const starValue = parseInt(star.getAttribute('data-value'));
                star.classList.toggle('inactive', starValue > rating);
            });
        }

        // Event listener for the review form submission
        document.getElementById('reviewForm').addEventListener('submit', function(event) {
            event.preventDefault();

            // Get form values
            const name = document.getElementById('reviewerName').value;
            const comment = document.getElementById('reviewComment').value;

            // Add new review to the list
            if (selectedRating > 0) {
                reviews.push({ name, rating: selectedRating, comment });
                displayReviews();
                document.getElementById('reviewForm').reset();
                highlightStars(0);  // Reset star rating display
                selectedRating = 0;
            } else {
                alert("Please select a rating before submitting your review.");
            }
        });

        // Initial display of reviews and setup star rating
        document.addEventListener('DOMContentLoaded', () => {
            displayReviews();
            handleStarRating();
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>
